This implementation of getopt(1) is based on the util-linux implementation of karelzak
(https://github.com/karelzak/util-linux/blob/f7fff0096a69e64c5b87bf968abf5b48b8037547/misc-utils/getopt.c).

I made some changes so that it compiles on Windows.